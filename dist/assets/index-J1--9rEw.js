(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();let c;function L(t,e,o){const i=document.getElementById("myChart");if(!c)c=new Chart(i,{type:"line",data:{labels:o,datasets:[{label:`${t}`,data:e,borderColor:b(),fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1}});else{const r={label:`${t}`,data:e,borderColor:b(),fill:!1};c.data.datasets.push(r),c.update()}_(i)}function _(t){t&&(t.style.backgroundColor="rgba(255, 255, 255, 0.74)",t.style.margin="20%",t.style.marginTop="0%",t.style.marginBottom="0%",t.style.border="3px solid #00000078")}function b(){const t=Math.floor(Math.random()*255),e=Math.floor(Math.random()*255),o=Math.floor(Math.random()*255);return`rgb(${t}, ${e}, ${o})`}function x(t,e,o){let r=[],a=[];for(let n=0;n<5;n++){let d=n*8;r.push(e.list[d].main.temp-273.15),a.push(new Date(e.list[d].dt*1e3).toLocaleDateString())}try{L(t,r,a);let n=document.getElementById("div");const d=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];let v=document.createElement("h2");v.innerHTML=`Météo pour <span class="ville_titre">${t}</span>`,n.appendChild(v);let m=document.createElement("div");m.className="div_images";let C=document.createElement("img");C.src=o.results[0].urls.small,n.appendChild(m),m.appendChild(C);for(let u=0;u<5;u++){let l=u*8,s=document.createElement("div");s.className="div_days",n.appendChild(s);let p=document.createElement("p");p.className="div_date";let M=new Date(e.list[l].dt*1e3);p.textContent=d[M.getDay()]+" "+e.list[l].dt_txt.split(" ")[0],s.appendChild(p);let h=document.createElement("img");h.className="div_logo";let w=e.list[l].weather[0].icon;h.src=`http://openweathermap.org/img/w/${w}.png`,s.appendChild(h);const I=parseInt(e.list[l].main.temp-273.15);let f=document.createElement("p");f.className="div_temperature",f.textContent=`${I} °C`,s.appendChild(f);let g=document.createElement("p");g.className="div_humidité",g.textContent="humidité : "+e.list[l].main.humidity+"%",s.appendChild(g);let y=document.createElement("p");y.className="div_vent",y.textContent="vent : "+Math.round(e.list[l].wind.speed*3.6)+"km/h",s.appendChild(y)}}catch{alert("CARD error")}}async function N(t){const e="041d85c6b318296cd9d672445609a779";try{return await(await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${t}&appid=${e}`)).json()}catch{alert("API error villes")}}async function $(t){try{return await(await fetch(`https://api.unsplash.com/search/photos?page=&query=${t}&client_id=Cm_UAgR03mS0QMWpGnFa72ZYum-ZWQcfq_MuwcK7Jkk`)).json()}catch{alert("API errror images")}}function j(){document.getElementById("checkbox").addEventListener("change",function(i){document.body.classList.toggle("dark-mode",i.target.checked)});const t=localStorage.getItem("darkMode")==="true",e=document.body.classList,o=document.getElementById("checkbox");t?(e.add("dark-mode"),o.checked=!0):(e.remove("dark-mode"),o.checked=!1),o.addEventListener("change",i=>{i.target.checked?(document.body.classList.add("dark-mode"),localStorage.setItem("darkMode","true")):(document.body.classList.remove("dark-mode"),localStorage.setItem("darkMode","false"))})}let E,k;document.getElementById("input_Ville").addEventListener("keyup",async function(t){const e=t.target.value;if(t.key==="Enter"){t.target.value="";try{E=await N(e),k=await $(e),x(e,E,k)}catch{alert("INPUT error")}}});j();
